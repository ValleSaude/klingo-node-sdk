{"version":3,"sources":["../../src/api/api.js"],"names":["axios","require","create","KlingoError","validate","requestHandler","responseErrorHandler","Api","interceptors","request","use","url","includes","authenticated","headers","TypeError","undefined","response","error","get","post","put","patch","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,YAAyBC,MAAzB,EAAd;;AACA,eAAwBD,OAAO,CAAC,uBAAD,CAA/B;AAAA,IAAQE,WAAR,YAAQA,WAAR;;AACA,IAAMC,QAAQ,GAAGH,OAAO,CAAC,aAAD,CAAxB;;AACA,gBAA2BA,OAAO,CAAC,wCAAD,CAAlC;AAAA,IAAQI,cAAR,aAAQA,cAAR;;AACA,gBAEIJ,OAAO,CAAC,0CAAD,CAFX;AAAA,IACEK,oBADF,aACEA,oBADF;;IAKMC,G;AAEJ,iBAAa;AAAA;AACXP,IAAAA,KAAK,CAACQ,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAACD,OAAD,EAAa;AAC1C,UACE,CAACA,OAAO,CAACE,GAAR,CAAYC,QAAZ,CAAqB,UAArB,CAAD,IACA,CAACH,OAAO,CAACE,GAAR,CAAYC,QAAZ,CAAqB,OAArB,CADD,IAEA,CAACH,OAAO,CAACE,GAAR,CAAYC,QAAZ,CAAqB,MAArB,CAFD,IAGA,CAACR,QAAQ,CAACS,aAAT,CAAuBJ,OAAO,CAACK,OAA/B,CAJH,EAKE;AACA,cAAM,IAAIC,SAAJ,CAAc,0CAAd,CAAN;AACD;;AACD,aAAON,OAAP;AACD,KAVD,EAUGO,SAVH;AAYAhB,IAAAA,KAAK,CAACQ,YAAN,CAAmBS,QAAnB,CAA4BP,GAA5B,CAAgCM,SAAhC,EAA2C,UAACE,KAAD,EAAW;AACpD,UAAI,EAAEA,KAAK,YAAYH,SAAnB,CAAJ,EAAmC;AACjC,cAAM,IAAIZ,WAAJ,CAAgBe,KAAhB,CAAN;AACD;;AACD,YAAMA,KAAN;AACD,KALD;AAMD;;;;WAED,eAAgB;AAAE,aAAOlB,KAAK,CAACmB,GAAN,OAAAnB,KAAK,YAAZ;AAA6B;;;WAC/C,gBAAgB;AAAE,aAAOA,KAAK,CAACoB,IAAN,OAAApB,KAAK,YAAZ;AAA8B;;;WAChD,eAAe;AAAE,aAAOA,KAAK,CAACqB,GAAN,OAAArB,KAAK,YAAZ;AAA6B;;;WAC9C,iBAAiB;AAAE,aAAOA,KAAK,CAACsB,KAAN,OAAAtB,KAAK,YAAZ;AAA+B;;;WAClD,mBAAkB;AAAE,aAAOA,KAAK,UAAL,OAAAA,KAAK,YAAZ;AAAgC;;;;;AAGtDuB,MAAM,CAACC,OAAP,GAAiB;AAAEjB,EAAAA,GAAG,EAAHA;AAAF,CAAjB","sourcesContent":["const axios = require('axios').default.create();\r\nconst { KlingoError } = require('../error/klingo-error');\r\nconst validate = require('../validate');\r\nconst { requestHandler } = require('./interceptors/verify-auth.interceptor');\r\nconst {\r\n  responseErrorHandler\r\n} = require('./interceptors/handler-error.interceptor');\r\n\r\n\r\nclass Api {\r\n\r\n  constructor(){\r\n    axios.interceptors.request.use((request) => {\r\n      if (\r\n        !request.url.includes('register') &&\r\n        !request.url.includes('login') &&\r\n        !request.url.includes('live') &&\r\n        !validate.authenticated(request.headers)\r\n      ) {\r\n        throw new TypeError('Verifique as configurações da requisição');\r\n      }\r\n      return request;\r\n    }, undefined);\r\n    \r\n    axios.interceptors.response.use(undefined, (error) => {\r\n      if (!(error instanceof TypeError)) {\r\n        throw new KlingoError(error);\r\n      }\r\n      throw error;\r\n    });\r\n  }\r\n\r\n  get (...params) { return axios.get(...params) };\r\n  post(...params) { return axios.post(...params) };\r\n  put(...params) { return axios.put(...params) };\r\n  patch(...params) { return axios.patch(...params) };\r\n  delete(...params) { return axios.delete(...params) };\r\n}\r\n\r\nmodule.exports = { Api };\r\n"],"file":"api.js"}