{"version":3,"sources":["../src/client.js"],"names":["require","External","Schedule","Patient","Checkin","Verify","logger","getBaseUrl","validate","Client","options","client","TypeError","log","info","error","success","debug","config","base","env","headers","Accept","xAppToken","verify","external","patient","schedule","checkin","setXAppToken","token","module","exports"],"mappings":";;;;;;AAAA,eAAqBA,OAAO,CAAC,sBAAD,CAA5B;AAAA,IAAQC,QAAR,YAAQA,QAAR;;AACA,gBAAqBD,OAAO,CAAC,sBAAD,CAA5B;AAAA,IAAQE,QAAR,aAAQA,QAAR;;AACA,gBAAoBF,OAAO,CAAC,qBAAD,CAA3B;AAAA,IAAQG,OAAR,aAAQA,OAAR;;AACA,gBAAoBH,OAAO,CAAC,qBAAD,CAA3B;AAAA,IAAQI,OAAR,aAAQA,OAAR;;AACA,gBAAmBJ,OAAO,CAAC,oBAAD,CAA1B;AAAA,IAAQK,MAAR,aAAQA,MAAR;;AACA,IAAMC,MAAM,GAAGN,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAMO,UAAU,GAAGP,OAAO,CAAC,SAAD,CAAP,CAAmBO,UAAtC;;AACA,IAAMC,QAAQ,GAAGR,OAAO,CAAC,YAAD,CAAxB;;IAEMS,M,GACJ,gBAAYC,OAAZ,EAAqB;AAAA;;AACnB,MAAI,CAACF,QAAQ,CAACG,MAAT,CAAgBD,OAAhB,CAAL,EAA+B;AAC7B,UAAM,IAAIE,SAAJ,CACJ,yDADI,CAAN;AAGD;;AAED,MAAIC,GAAG,GAAG;AACRA,IAAAA,GAAG,EAAE,eAAM,CAAG,CADN;AAERC,IAAAA,IAAI,EAAE,gBAAM,CAAG,CAFP;AAGRC,IAAAA,KAAK,EAAE,iBAAM,CAAG,CAHR;AAIRC,IAAAA,OAAO,EAAE,mBAAM,CAAG;AAJV,GAAV;;AAOA,MAAIN,OAAO,CAACO,KAAZ,EAAmB;AACjBJ,IAAAA,GAAG,GAAGP,MAAM,CAACI,OAAO,CAACG,GAAT,EAAcH,OAAO,CAACO,KAAtB,CAAZ;AACD;;AAED,MAAMC,MAAM,GAAG;AACb;AACN;AACMC,IAAAA,IAAI,EAAE;AACJ,iBAASZ,UAAU,CAACG,OAAO,CAACU,GAAT,EAAc,SAAd;AADf,KAHO;AAMbC,IAAAA,OAAO,EAAE;AACP,sCACE,wCAFK;AAGP,sCAAgC,GAHzB;AAIP,qCAA+B,GAJxB;AAKPC,MAAAA,MAAM,EAAE,kBALD;AAMP,sBAAgB,kBANT;AAOP,qBAAeZ,OAAO,CAACa;AAPhB;AAST;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAxCmB,GAAf;AA2CA,OAAKC,MAAL,GAAc,IAAInB,MAAJ,CAAW,IAAX,EAAiBa,MAAjB,CAAd;AACA,OAAKO,QAAL,GAAgB,IAAIxB,QAAJ,CAAa,IAAb,EAAmBiB,MAAnB,CAAhB;AACA,OAAKQ,OAAL,GAAe,IAAIvB,OAAJ,CAAY,IAAZ,EAAkBe,MAAlB,CAAf;AACA,OAAKS,QAAL,GAAgB,IAAIzB,QAAJ,CAAa,IAAb,EAAmBgB,MAAnB,CAAhB;AACA,OAAKU,OAAL,GAAe,IAAIxB,OAAJ,CAAY,IAAZ,EAAkBc,MAAlB,CAAf;;AAEA,OAAKW,YAAL,GAAoB,UAACC,KAAD,EAAW;AAC7BZ,IAAAA,MAAM,CAACG,OAAP,CAAe,aAAf,IAAgCS,KAAhC;AACD,GAFD;AAGD,C;;AAGHC,MAAM,CAACC,OAAP,GAAiB;AAAEvB,EAAAA,MAAM,EAANA;AAAF,CAAjB","sourcesContent":["const { External } = require('./resources/external');\r\nconst { Schedule } = require('./resources/schedule');\r\nconst { Patient } = require('./resources/patient');\r\nconst { Checkin } = require('./resources/checkin');\r\nconst { Verify } = require('./resources/verify');\r\nconst logger = require('./logger');\r\nconst getBaseUrl = require('./utils').getBaseUrl;\r\nconst validate = require('./validate');\r\n\r\nclass Client {\r\n  constructor(options) {\r\n    if (!validate.client(options)) {\r\n      throw new TypeError(\r\n        'Erro ao conectar com klingo! Verifique as configurações'\r\n      );\r\n    }\r\n\r\n    let log = {\r\n      log: () => { },\r\n      info: () => { },\r\n      error: () => { },\r\n      success: () => { }\r\n    };\r\n\r\n    if (options.debug) {\r\n      log = logger(options.log, options.debug);\r\n    }\r\n\r\n    const config = {\r\n      /*       logger: log,\r\n            env: options.env, */\r\n      base: {\r\n        default: getBaseUrl(options.env, 'default')\r\n      },\r\n      headers: {\r\n        'Access-Control-Allow-Methods':\r\n          'POST, GET, PATCH, PUT, DELETE, OPTIONS',\r\n        'Access-Control-Allow-Headers': '*',\r\n        'Access-Control-Allow-Origin': '*',\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'X-APP-TOKEN': options.xAppToken\r\n      }\r\n      /*       transform: (body, response, resolveWithFullResponse) => {\r\n              let status = response.statusCode <= 200 ? \"success\" : \"error\";\r\n      \r\n              if (response.statusCode <= 200) {\r\n                log.info({\r\n                  statusCode: response.statusCode,\r\n                  statusMessage: response.statusMessage,\r\n                  status,\r\n                  content: body\r\n                });\r\n              } else {\r\n                content = content.errors.error;\r\n                log.error({\r\n                  statusCode: response.statusCode,\r\n                  statusMessage: response.statusMessage,\r\n                  status,\r\n                  content: body\r\n                });\r\n              }\r\n      \r\n              return {\r\n                statusCode: response.statusCode,\r\n                status,\r\n                content: body\r\n              };\r\n            } */\r\n    };\r\n\r\n    this.verify = new Verify(this, config);\r\n    this.external = new External(this, config);\r\n    this.patient = new Patient(this, config);\r\n    this.schedule = new Schedule(this, config);\r\n    this.checkin = new Checkin(this, config);\r\n\r\n    this.setXAppToken = (token) => {\r\n      config.headers['X-APP-TOKEN'] = token;\r\n    };\r\n  }\r\n}\r\n\r\nmodule.exports = { Client };\r\n"],"file":"client.js"}