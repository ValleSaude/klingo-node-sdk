{"version":3,"sources":["../../src/resources/external.js"],"names":["config","require","moment","Api","External","client","options","api","body","headers","endpoint","base","external","register","post","response","data","authenticate","authentication","expires","add","expires_in","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAMC,MAAM,GAAGD,OAAO,CAAC,QAAD,CAAtB;;AACA,eAAcA,OAAO,CAAC,YAAD,CAArB;AAAA,IAAOE,GAAP,YAAOA,GAAP;;IAEMC,Q;AACJ,oBAAYC,MAAZ,EAAoBC,OAApB,EAA6B;AAAA;AAC3B,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,GAAL,GAAW,IAAIJ,GAAJ,EAAX;AACD;;;;;oGAED,iBAAeK,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,gBAAAA,OADR,GACkB,KAAKH,OAAL,CAAaG,OAD/B;AAEQC,gBAAAA,QAFR,aAEsB,KAAKJ,OAAL,CAAaK,IAAb,WAFtB,cAEmDX,MAAM,CAACY,QAAP,CAAgBC,QAFnE;AAAA;AAAA,uBAGyB,KAAKN,GAAL,CAASO,IAAT,CAAcJ,QAAd,EAAwBF,IAAxB,EAA8B;AAAEC,kBAAAA,OAAO,EAAPA;AAAF,iBAA9B,CAHzB;;AAAA;AAGQM,gBAAAA,QAHR;AAAA,iDAISA,QAAQ,CAACC,IAJlB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;wGAOA,kBAAmBR,IAAnB;AAAA;;AAAA;AAAA;AAAA;AAAA;AACQC,gBAAAA,OADR,GACkB,KAAKH,OAAL,CAAaG,OAD/B;AAEQC,gBAAAA,QAFR,aAEsB,KAAKJ,OAAL,CAAaK,IAAb,WAFtB,cAEmDX,MAAM,CAACY,QAAP,CAAgBK,YAFnE;AAAA;AAAA,uBAGyB,KAAKV,GAAL,CAASO,IAAT,CAAcJ,QAAd,EAAwBF,IAAxB,EAA8B;AAAEC,kBAAAA,OAAO,EAAPA;AAAF,iBAA9B,CAHzB;;AAAA;AAAA;AAGUO,gBAAAA,IAHV,wBAGUA,IAHV;AAIE,qBAAKV,OAAL,CAAaY,cAAb,mCACKF,IADL;AAEEG,kBAAAA,OAAO,EAAEjB,MAAM,GAAGkB,GAAT,CAAaJ,IAAI,CAACK,UAAlB,EAA8B,SAA9B;AAFX;AAJF,kDAQS,KAAKf,OAAL,CAAaY,cARtB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;AAYFI,MAAM,CAACC,OAAP,GAAiB;AAAEnB,EAAAA,QAAQ,EAARA;AAAF,CAAjB","sourcesContent":["const config = require('../config');\r\nconst moment = require('moment');\r\nconst {Api} = require('../api/api');\r\n\r\nclass External {\r\n  constructor(client, options) {\r\n    this.client = client;\r\n    this.options = options;\r\n    this.api = new Api();\r\n  }\r\n\r\n  async register(body) {\r\n    const headers = this.options.headers;\r\n    const endpoint = `${this.options.base.default}/${config.external.register}`;\r\n    const response = await this.api.post(endpoint, body, { headers });\r\n    return response.data;\r\n  }\r\n\r\n  async authenticate(body) {\r\n    const headers = this.options.headers;\r\n    const endpoint = `${this.options.base.default}/${config.external.authenticate}`;\r\n    const { data } = await this.api.post(endpoint, body, { headers });\r\n    this.options.authentication = {\r\n      ...data,\r\n      expires: moment().add(data.expires_in, 'seconds')\r\n    };\r\n    return this.options.authentication;\r\n  }\r\n}\r\n\r\nmodule.exports = { External };\r\n"],"file":"external.js"}